---
title: "TAE - Unit 1 - Recitation"
author: "GT"
date: "14 avril 2016"
output: html_document
---

## Unit 1 - Recitation

### The importance of Food and Nutrition

Good nutrition is an important part of leading a healthy lifestyle. Malnutrition can result in obesity.
More than 35% of American adults are obese. The trends Worldwide are no different. Obesity is one of
today's visible public health problems.  
So good nutrition is essential for an overall healthy lifestyle. We have access to hundreds of nutrition and
weight loos applications. These apps are mostly powered by the United States Departement of Agricultural, USDA, 
food database. These database is about over 7000 food items including the amount of calories and nutrients.

### Working with Data in R

Start by reading the dataset `USDA.csv`, which contains all foods in the USDA database in 100 grams amounts.

```{r}
# Use the function read.csv() and save the output to a data frame, USDA
USDA = read.csv("USDA.csv")
# Learn about the data using the functino str()
str(USDA)
# The first variable is a unique identification number for each of the foods starting with 1001...
# To obtain high-level statistical information about the dataset, it can be used the summary() function
summary(USDA)
```

### Data Analysis

```{r}
# The maximum level of Sodium is 38758, which is very high.
# To see which food this correspends to, first is necessary to select the vector of data associated with the variable Sodium
head(USDA$Sodium, 20)
# find which food is associated with the function which.max()
which.max(USDA$Sodium)  # 265
# and use the answer (the index) to look at the vector corresponding to the text descriptor of the foods
# in order to remember the name of the variable, it can be used the names() function
names(USDA)
# it's possible now to check for the corresponding food
USDA$Description[265] # salt, table
# find out which foods contain more than 10000 mg of sodium creating a subset of the origina data frame
HighSodium = subset(USDA, Sodium > 10000)
# check how many foods exist in this new data frame with the function nrow()
nrow(HighSodium) # 10
# check the name of foodss by looking at their Description vector
HighSodium$Description
# Find how much sodium is contained in 100 gr of caviar
# get the index of caviar first using the function match() and track down the word 'caviar' in the text description
match("CAVIAR", USDA$Description) # 4154
# then find the sodium level
USDA$Sodium[4154] # 1500 mg
# this sequence of operations can be done with just one expression
USDA$Sodium[match("CAVIAR", USDA$Description)]
# Evaluate this value by comparing it to the mean and the standard deviation of the sodium levels
summary(USDA$Sodium)
# and to get the sd
sd(USDA$Sodium)
# remove the missing values
sd(USDA$Sodium, na.rm = TRUE) # 1045.417
# if mean and sd are summed
322.1+1045.417 # 1367.517
# the result is still smaller than the amount of sodium in 100 gr of caviar
```

### Creating Plots in R

Visualization is a crucial step for initial data exploration.
```{r}
# First create a scatterplot with Protein on the x-axis and Fat on the y-axis
# using the plot() function
plot(USDA$Protein,USDA$TotalFat)
# The plot has a very interesting triangular shape, it looks like foods that are higher in protein are typically lower in fat and vice versa.
# R gives default names for the axis. It's possible to modify them adding more
# arguments to the plot function.
# add also a title and change the color
plot(USDA$Protein,USDA$TotalFat, xlab="Protein", ylab="Fat", main="Protein vs Fat",col="red")
# Another way to visualize data is by plotting histograms using the hist() function
hist(USDA$VitaminC, xlab="Vitamin C (mg)", main="Histogram of Vitamin C Levels")
# The histogram groups them all together in one cell. In order to zoom in this section, it's necessary to limit the x-axis to go from zero to 100 mg
hist(USDA$VitaminC, xlab="Vitamin C (mg)", main="Histogram of Vitamin C Levels",xlim=c(0,100))
# But now there is only one big cell. To really break the cell into smaller pieces, it's necessary to add the argument 'breaks='
hist(USDA$VitaminC, xlab="Vitamin C (mg)", main="Histogram of Vitamin C Levels",xlim=c(0,100),breaks=100)
# There are actually only 5 cells and each cell is 20 mg long. This beacause the orginal interval, 0 to 2000 is divided into 100 cells, 2000/100=20
# To correct this it's needed to think in terms of the original interval and break it into 2000 cells
hist(USDA$VitaminC, xlab="Vitamin C (mg)", main="Histogram of Vitamin C Levels",xlim=c(0,100),breaks=2000)
# In the refined histogram it's possible to see that  more than 5000 foods have less than 1 mg of Vitamim C
# A third way to visualize data is using box plots using boxplot() function
boxplot(USDA$Sugar, main="Boxplot of Sugar Levels", ylab="Sugar (g)")
# The average across the data set seems to be pretty low: around 5 gr.
# But there are a lot of outliers with extremely high values of sugar
# There exist some foods that have almost 100 gr of sugar in 100 gr.
```