---
title: "TAE - Unit 2 - Recitation"
author: "GT"
date: "April 22, 2016"
output: html_document
---

### The Data

In this recitation we will apply some of the ideas from Moneyball to data from the
National Basketball Association (NBA).

```{r}
NBA = read.csv("NBA_train.csv")
str(NBA)
```
The data contains data from all teams in season since 1980, except for ones with
less than 82 games.

- *SeasonEnd* is the year the season ended
- *Team* is the name of the team
- *Playoff* is a binary variable for whether or not a team made it to the playoffs
- *W* is the number of regulaar season wins
- *PTS* are the points scored during the regular season
- *oppPTS* are the opponent points scored during the regular season.
- *FG* is the number of _successful_ field goals (2pt and 3pt)
- *FGA* is the number of field goal _attempts_.
- *X2P* is the number of successful 2pt.
- *X2PA* is the number of attempted 2pt.
- *X3P* is the number of successful 3pt.
- *X3PA* is the number of attempted 3pt.
- *FT* is the number of successful free throws.
- *FTA* is the number of attempted free throws.
- *ORB* are offensive rebounds
- *DRB* are defensive rebounds.
- *AST* stands for assists.
- *STL* stands for steals.
- *BLK* stands for blocks.
- *TOV* stands for turnover.

The variables 2P, 2PA, 3P and 3PA in the csv file are modified during the 
import of the data by R. R doesn't like it when a variable begins with a number.
If a variable begins with a number it will put an 'X' in front of it.

### Playoffs and Wins

The goal of a basketball team is similar to that of a baseball team, making the playoffs.

How many games does a team need to win in order to make the playoffs ?

Let's use the table command to figure this out for the NBA.

```{r}
table(NBA$W, NBA$Playoffs)
```

We see that after about 45 wins, teams almost always make it to the playoffs. So it seems like a good goal
would be to try to win about 42 games.

In basketball, games are won by scoring more points than the other team. Can we use the difference between
points scored and points allowed throughout the regular season in order to predict the number of games that
a team will win?

Create a variable that is the difference between points scored and points allowed.

```{r}
NBA$PTSdiff = NBA$PTS - NBA$oppPTS
plot(NBA$PTSdiff, NBA$W)
```

This look like there's a strong linear relationship between these two variables

```{r}
WinsReg = lm(W ~ PTSdiff, data=NBA)
summary(WinsReg)
```

The first thing that we notice is that we've got very significant variables over here and R-squared = 0.9423,
which is very high.

Let's write down the equation that we found.

`W = 41 + 0.0326 * PTSdiff`

So in order to win at least 42 games and have good chance of making it to the playoffs, we can calculate
that

```{r}
(42-41)/0.0326 #30.67
```

So we need to score at least 31 more points than we allow in order to win at least 42 games.
